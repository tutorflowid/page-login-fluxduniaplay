<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Verifikasi Email...</title>
</head>
<body>
  <p>Sedang memverifikasi email Anda...</p>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, applyActionCode } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // Konfigurasi Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDsFRTekqFlakN4u6EMPP4ErT5TSMH7DX8",
      authDomain: "fluxduniaplay-auth.firebaseapp.com",
      projectId: "fluxduniaplay-auth",
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Ambil kode verifikasi
    const params = new URLSearchParams(window.location.search);
    const oobCode = params.get("oobCode");

    if (oobCode) {
      applyActionCode(auth, oobCode)
        .then(() => {
          alert("Email berhasil diverifikasi! Silakan login.");
          window.location.href = "/login.html";
        })
        .catch((err) => {
          console.error(err);
          alert("Kode verifikasi tidak valid atau sudah digunakan.");
          window.location.href = "/login.html";
        });
    } else {
      alert("Kode verifikasi tidak ditemukan.");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
